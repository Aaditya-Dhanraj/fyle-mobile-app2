<ion-header>
  <ion-toolbar class="view-comment--toolbar">
    <ion-buttons mode="md" slot="end">
      <ion-button>
        Done
      </ion-button>
    </ion-buttons>
    <ion-title mode="md">
      Comment 
      (<span *ngIf="totalCommentsCount$|async as totalCommentsCount">{{totalCommentsCount}}</span>)
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="view-comment--container">
  <div *ngFor="let estatus of estatuses$|async as estatuses">
    <!-- <div class="view-comment--card">
      <div class="view-comment--card-avatar">
        <span class="view-comment--profile" *ngIf="estatus.us_full_name">{{estatus.us.full_name | initials}}</span>
        <span class="view-comment--profile" *ngIf="!estatus.us_full_name">
          <img src="assets/images/fy-pdf.svg">
        </span>
      </div>

      <div class="view-comment--card-body" [ngClass]="{'view-comment--bot-comment': estatus.isBotComment}">
        <p *ngIf="!(estatus.st.comment.indexOf('created') > -1 && estatus.st.comment.indexOf('reversal') > -1)" class="comment-detail"> A-{{estatus.isBotComment}}-{{ estatus.st.comment }}</p>
        <p *ngIf="(estatus.st.comment.indexOf('created') > -1 && estatus.st.comment.indexOf('reversal') > -1)" class="comment-detail"> B-{{vm.comment}}</p>
        <a *ngIf="(estatus.st.comment.indexOf('created') > -1 && estatus.st.comment.indexOf('reversal') > -1)" (click)="openViewExpense()">{{vm.expenseNumber}} </a>
      </div>
    </div> -->

    <ion-grid class="view-comment--card" [ngClass]="{'view-comment--bot-comment': estatus.isBotComment, 'view-comment--self-comment': estatus.isSelfComment}">
      <ion-row>
        <ion-col size="2">
          <span class="view-comment--profile" *ngIf="estatus.us.full_name">{{estatus.us.full_name | initials}}</span>
          <span class="view-comment--profile" *ngIf="!estatus.us.full_name">
            <img src="assets/images/fy-bot.svg">
          </span>
        </ion-col>
        <ion-col size="10">
            <span class="view-comment--commenter-name">{{ estatus.us.full_name ? estatus.us.full_name: 'Fyle Bot'}}</span>
            <p class="comment-timestamp">{{estatus.st.created_at | date:'MMM d @ h:mm a'}}</p>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12">
          <p *ngIf="!(estatus.st.comment.indexOf('created') > -1 && estatus.st.comment.indexOf('reversal') > -1)" class="comment-detail">{{ estatus.st.comment }}</p>
          <p *ngIf="(estatus.st.comment.indexOf('created') > -1 && estatus.st.comment.indexOf('reversal') > -1)" class="comment-detail">{{ vm.comment }}</p>
          <a *ngIf="(estatus.st.comment.indexOf('created') > -1 && estatus.st.comment.indexOf('reversal') > -1)" (click)="openViewExpense()">{{ vm.expenseNumber }} </a>
        </ion-col>
      </ion-row>
    </ion-grid>

  </div>



</ion-content>