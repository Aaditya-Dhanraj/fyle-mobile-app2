<div class="reports-card" (click)="goToReport(erpt)" *ngIf="!actionOpened">
  <div class="reports-card--main-info">
    <div>
      <div>
        <span class="reports-card--currency">
          {{erpt.rp_currency}}
        </span>
        <span class="reports-card--amount">
          {{erpt.rp_amount}}
        </span>
      </div>
      <div class="reports-card--purpose">
        {{erpt.rp_purpose}}
      </div>
    </div>
    <div (click)="actionOpened = true">
      <mat-icon>
        more_horiz
      </mat-icon>
    </div>
  </div>
  <div class="reports-card--secondary-info">
    <div class="reports-card--no-transactions">Contains <span>{{erpt.rp_num_transactions}}</span> expenses</div>
    <div class="reports-card--approved-on"
      *ngIf="erpt.rp_approved_at && (['APPROVER_PENDING', 'APPROVER_INQUIRY'].indexOf(erpt.rp_state) === -1)">
      Approved on <span>{{erpt.rp_approved_at | date: 'dd MMMM yyyy'}}</span>
    </div>
  </div>
  <div class="reports-card--pill" [class]="'reports-card--pill__'+erpt?.rp_state?.toLowerCase()">
    {{erpt.rp_state}}
  </div>
</div>


<div class="reports-card" *ngIf="actionOpened">
  <div (click)="actionOpened = false">
    <span>
      Close
    </span>
  </div>
  <div>
    <div (click)="viewComments($event, erpt)">
      <button class="button-text button-link p-0">
        View Comments
      </button>
    </div>

    <div class="button-row" (click)="deleteReport($event, erpt)">
      <button>Delete</button>
    </div>
  </div>
</div><!-- Show this if clicked on more action -->