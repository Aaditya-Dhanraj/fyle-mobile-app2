<ion-header>
  <ion-toolbar class="view-per-diem--toolbar">
    <ion-buttons mode="md" slot="end">
      <ion-button (click)="goBack()">
        <mat-icon>close</mat-icon>
      </ion-button>
    </ion-buttons>
    <ion-title mode="md">View Per Diem</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="view-per-diem--container" *ngIf="extendedPerDiem$|async as extendedPerDiem">
    <!-- Todo: Move this to currnecy directive later -->
    <div class="view-per-diem--amount-currency-block">
      <div class="view-per-diem--currency-block">
        <span class="view-per-diem--currency">{{extendedPerDiem.tx_currency}}</span>
      </div>
      <div class="view-per-diem--amount-block">
        <span class="view-per-diem--amount">{{extendedPerDiem.tx_amount}}</span>
      </div>
    </div>

    <div class="view-per-diem--info-card">
      <div class="view-per-diem--element">
        <div class="view-per-diem--element-label">From</div>
        <div class="view-per-diem--element-value">{{extendedPerDiem.tx_from_dt | date: 'dd/mm/yyyy'}}</div>
      </div>

      <div class="view-per-diem--element">
        <div class="view-per-diem--element-label">To</div>
        <div class="view-per-diem--element-value">{{extendedPerDiem.tx_to_dt | date: 'dd/mm/yyyy'}}</div>
      </div>

      <div class="view-per-diem--element">
        <div class="view-per-diem--element-label">No of Days</div>
        <div class="view-per-diem--element-value">{{extendedPerDiem.tx_num_days}}</div>
      </div>

      <div class="view-per-diem--element" *ngIf="perDiemRate$|async as perDiemRate">
        <div class="view-per-diem--element-label">Per Diem Type</div>
        <div class="view-per-diem--element-value">
          {{perDiemRate.name}} ({{ perDiemRate.rate | currency: perDiemRate.currency }} per day)
        </div>
      </div>

      <div class="view-per-diem--element">
        <div class="view-per-diem--element-label">Purpose</div>
        <div class="view-per-diem--element-value">{{extendedPerDiem.tx_purpose}}</div>
      </div>

      <div class="view-per-diem--element" *ngIf="extendedPerDiem.tx_org_category !== extendedPerDiem.tx_sub_category">
        <div class="view-per-diem--element-label">Sub Category</div>
        <div class="view-per-diem--element-value">{{extendedPerDiem.tx_sub_category}}</div>
      </div>

      <div class="view-per-diem--element" *ngIf="extendedPerDiem.tx_project_id">
        <div class="view-per-diem--element-label">Project</div>
        <div class="view-per-diem--element-value">{{extendedPerDiem.tx_project_name}}</div>
      </div>

      <div class="view-per-diem--element" *ngIf="extendedPerDiem.tx_project_id">
        <div class="view-per-diem--element-label">Billable</div>
        <div class="view-per-diem--element-value">{{extendedPerDiem.tx_billable ? 'Yes' : 'No'}}</div>
      </div>

      <div class="view-per-diem--element" *ngIf="extendedPerDiem.tx_cost_center_id">
        <div class="view-per-diem--element-label">Cost Center</div>
        <div class="view-per-diem--element-value">{{extendedPerDiem.tx_cost_center_name}}</div>
      </div>

      <div *ngIf="(perDiemCustomFields$|async)?.length > 0">
        <div class="view-per-diem--element" *ngFor="let perDiemCustomField of perDiemCustomFields$ | async; index as i">
          <div class="view-per-diem--element-label">{{perDiemCustomField.name}}</div>
          <div class="view-per-diem--element-value">{{getDisplayValue(perDiemCustomField)}}</div>
        </div>
      </div>
    </div>

    <!-- Todo: comment copmponnet -->
    <div class="view-per-diem--info-card">
      <div class="view-per-diem--common-action-block">
        <mat-icon>chat</mat-icon>
        <p>Comment</p>
      </div>
    </div>
  </div>

</ion-content>
