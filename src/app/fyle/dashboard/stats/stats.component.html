<div class="stats">
  <div class="stats--background">
    <ion-header mode="md">
      <ion-toolbar class="stats--toolbar">
        <ion-buttons slot="start">
          <app-fy-menu-icon></app-fy-menu-icon>
        </ion-buttons>
        <ion-title class="stats--title" mode="md">
          Home
        </ion-title>
        <ion-buttons slot="end">
          <div class="stats--action-shortcut" (click)="openAddExpenseActionSheet()">
            <mat-icon svgIcon="fy-plus"></mat-icon>
          </div>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-grid class="stats--body">
      <ion-row class="stats--report-stats-row" *ngIf="isConnected$|async">
        <ion-col class="stats--report-stats-col">
          <div class="stats--header">
            REPORTS
          </div>
        </ion-col>
      </ion-row>
      <ion-row *ngIf="isConnected$|async">
        <ion-col class="stats--report-badge-col stats--report-badge-col__left stats--report-badge-col__top" size="6">
          <app-stat-badge [currency]="homeCurrency$|async"
                          [name]="'Draft'"
                          [reportState]="ReportStates.DRAFT"
                          [count]="(draftStats$|async)?.count"
                          [value]="(draftStats$|async)?.sum"
                          [loading]="reportStatsLoading"
                          (badgeClicked)="goToReportsPage($event)"></app-stat-badge>
        </ion-col>
        <ion-col class="stats--report-badge-col stats--report-badge-col__right stats--report-badge-col__top" size="6">
          <app-stat-badge [currency]="homeCurrency$|async"
                          [name]="'Reported'"
                          [reportState]="ReportStates.APPROVER_PENDING"
                          [count]="(reportedStats$|async)?.count"
                          [value]="(reportedStats$|async)?.sum"
                          [loading]="reportStatsLoading"
                          (badgeClicked)="goToReportsPage($event)"
          ></app-stat-badge>
        </ion-col>
      </ion-row>
      <ion-row *ngIf="isConnected$|async">
        <ion-col class="stats--report-badge-col stats--report-badge-col__left stats--report-badge-col__bottom" size="6">
          <app-stat-badge [currency]="homeCurrency$|async"
                          [name]="'Approved'"
                          [reportState]="ReportStates.APPROVED"
                          [count]="(approvedStats$|async)?.count"
                          [value]="(approvedStats$|async)?.sum"
                          [loading]="reportStatsLoading"
                          (badgeClicked)="goToReportsPage($event)"
          ></app-stat-badge>
        </ion-col>
        <ion-col class="stats--report-badge-col stats--report-badge-col__right stats--report-badge-col__bottom" size="6">
          <app-stat-badge [currency]="homeCurrency$|async"
                          [name]="'Payment Pending'"
                          [reportState]="ReportStates.PAYMENT_PENDING"
                          [count]="(paymentPendingStats$|async)?.count"
                          [value]="(paymentPendingStats$|async)?.sum"
                          [loading]="reportStatsLoading"
                          (badgeClicked)="goToReportsPage($event)"
          ></app-stat-badge>
        </ion-col>
      </ion-row>
      <ion-row class="stats--expenses-stats-row" *ngIf="isConnected$|async">
        <ion-col class="stats--expenses-stats-col">
          <div class="stats--header">
            EXPENSES
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
  <div *ngIf="isConnected$|async; else offlineMessage" class="stats--expenses-card" matRipple
       (click)="goToExpensesPage()">
    <ion-grid>
      <ion-row>
        <ion-col size="6">
          <div class="stats--expenses-count">
            <ng-container
                    *ngIf="unreportedExpensesCount$ | async as unreportedExpensesCount; else expenseCountSkeleton">
              {{unreportedExpensesCount?.count}}
            </ng-container>
            <ng-template #expenseCountSkeleton>
              <ion-skeleton-text class="stats--expenses-skeleton-text stats--expenses-skeleton-text__width-small"
                                 animated></ion-skeleton-text>
            </ng-template>
          </div>
        </ion-col>
        <ion-col size="6">
          <div class="stats--expenses-amount">
            <ng-container
                    *ngIf="unreportedExpensesAmount$ | async as unreportedExpensesAmount; else expenseAmountSkeleton">
              <span class="stats--expenses-amount-currency">
                {{currencySymbol$|async}}
              </span> {{ unreportedExpensesAmount?.amount | humanizeCurrency: (homeCurrency$|async): 2: true}}
            </ng-container>
            <ng-template #expenseAmountSkeleton>
              <ion-skeleton-text
                      class="stats--expenses-skeleton-text stats--expenses-skeleton-text__width-medium stats--expenses-skeleton-text__align-right"
                      animated></ion-skeleton-text>
            </ng-template>
          </div>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col class="stats--expenses-title-col">
          <div class="stats--expenses-title">
            <ng-container *ngIf="unreportedExpensesAmount$|async; else unreportedExpensesStatsSkeleton">
              Unreported Expenses
            </ng-container>
            <ng-template #unreportedExpensesStatsSkeleton>
              <ion-skeleton-text class="stats--expenses-skeleton-text stats--expenses-skeleton-text__width-large"
                                 animated></ion-skeleton-text>
            </ng-template>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>

  <div *ngIf="isConnected$|async" class="stats--ccc-cards-section">
    <ng-container *ngIf="assignedCCCCount$ | async as assignedCCCCount">
      <ion-grid>
        <ion-row>
          <ion-col size="7">
            <div class="stats--header">
              CARD TRANSACTIONS ({{ assignedCCCCount }})
            </div>
          </ion-col>
          <ion-col size="5">
            <div>
              <span class="stats--pager-dots"></span>
              <span class="stats--pager-dots stats--pager-dots__active"></span>
              <span class="stats--pager-dots"></span>
              <span class="stats--pager-dots"></span>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ng-container>

    <ion-slides [options]="slideOpts">
      <ion-slide>
        <div class="stats--card-section">
          <div class="stats--bank">
              <ion-grid>
              <ion-row>
                  <ion-col size="6">
                  <div class="stats--bank-name">
                      HDFC Bank
                  </div>
                  </ion-col>
                  <ion-col size="6">
                  <div class="stats--card-info">
                      Corporate Card
                  </div>
                  </ion-col>
              </ion-row>
              <ion-row>
                  <ion-col>
                  <div class="stats--card-number">
                      xxxx x123
                  </div>
                  </ion-col>
              </ion-row>
              </ion-grid>
          </div>
          <div class="stats--sync-detail">
              Last synced at 24 Jan 2021, 12.45 pm
          </div>
          </div>
          
          <div class="stats--stats">
          <div class="stats--start-info">
              Showing all transactions from Jan15, 2021
          </div>
          <div>
              <div class="stats--classified-stats">
              <div class="stats--classified-count">
                  123
              </div>
              <div class="stats--classified-amount">
                  $120003
              </div>
              </div>
              <div class="stats--stats-title">
              Classified Transactions
              </div>
              <hr class="stats--border-bottom">
              <div class="stats--classified-stats stats--classified-stats__margin-top">
              <div class="stats--classified-count">
                  13
              </div>
              <div class="stats--classified-amount">
                  $1000
              </div>
              </div>
              <div class="stats--stats-title">
              Unclassified Transactions
              </div>
          </div>
          </div>
      </ion-slide>
      <ion-slide>
        <div class="stats--card-section">
          <div class="stats--bank">
              <ion-grid>
              <ion-row>
                  <ion-col size="6">
                  <div class="stats--bank-name">
                      HDFC Bank
                  </div>
                  </ion-col>
                  <ion-col size="6">
                  <div class="stats--card-info">
                      Corporate Card
                  </div>
                  </ion-col>
              </ion-row>
              <ion-row>
                  <ion-col>
                  <div class="stats--card-number">
                      xxxx x123
                  </div>
                  </ion-col>
              </ion-row>
              </ion-grid>
          </div>
          <div class="stats--sync-detail">
              Last synced at 24 Jan 2021, 12.45 pm
          </div>
          </div>
          
          <div class="stats--stats">
          <div class="stats--start-info">
              Showing all transactions from Jan15, 2021
          </div>
          <div>
              <div class="stats--classified-stats">
              <div class="stats--classified-count">
                  123
              </div>
              <div class="stats--classified-amount">
                  $120003
              </div>
              </div>
              <div class="stats--stats-title">
              Classified Transactions
              </div>
              <hr class="stats--border-bottom">
              <div class="stats--classified-stats stats--classified-stats__margin-top">
              <div class="stats--classified-count">
                  13
              </div>
              <div class="stats--classified-amount">
                  $1000
              </div>
              </div>
              <div class="stats--stats-title">
              Unclassified Transactions
              </div>
          </div>
          </div>
      </ion-slide>
      <ion-slide>
        <div class="stats--card-section">
          <div class="stats--bank">
              <ion-grid>
              <ion-row>
                  <ion-col size="6">
                  <div class="stats--bank-name">
                      HDFC Bank
                  </div>
                  </ion-col>
                  <ion-col size="6">
                  <div class="stats--card-info">
                      Corporate Card
                  </div>
                  </ion-col>
              </ion-row>
              <ion-row>
                  <ion-col>
                  <div class="stats--card-number">
                      xxxx x123
                  </div>
                  </ion-col>
              </ion-row>
              </ion-grid>
          </div>
          <div class="stats--sync-detail">
              Last synced at 24 Jan 2021, 12.45 pm
          </div>
          </div>      
          <div class="stats--stats">
          <div class="stats--start-info">
              Showing all transactions from Jan15, 2021
          </div>
          <div>
              <div class="stats--classified-stats">
              <div class="stats--classified-count">
                  123
              </div>
              <div class="stats--classified-amount">
                  $120003
              </div>
              </div>
              <div class="stats--stats-title">
              Classified Transactions
              </div>
              <hr class="stats--border-bottom">
              <div class="stats--classified-stats stats--classified-stats__margin-top">
              <div class="stats--classified-count">
                  13
              </div>
              <div class="stats--classified-amount">
                  $1000
              </div>
              </div>
              <div class="stats--stats-title">
              Unclassified Transactions
              </div>
          </div>
          </div>
      </ion-slide>
    </ion-slides>
  </div>
  

  <ng-template #offlineMessage>
    <div class="stats--zero-state">
      <app-fy-zero-state class="stats--zero-state" image="../../../../assets/images/no-internet.svg"
                         header="You're Offline!" message="Fear not, you can still add expenses offline."
                         [unscaledImage]="true" [useNewStyling]="true"></app-fy-zero-state>
    </div>
  </ng-template>
</div>

