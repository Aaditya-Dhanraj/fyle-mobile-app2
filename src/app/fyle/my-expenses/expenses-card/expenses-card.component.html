
<div *ngIf="showDt" class="expenses-card--date">
  {{expense.tx_txn_dt | date: 'MMM dd, yyyy'}}
</div>

<div class="expenses-card--body">

  
  
  <ng-container *ngIf="expenseFields$|async as expenseFields">

    <ion-grid>
      <ion-row>
        <ion-col size="2.65">
          <div class="expenses-card--receipt-container">
            <!-- <ion-img [src]="receipt"></ion-img> -->
            <mat-icon svgIcon="{{receipt}}"></mat-icon>
          </div>
          
        </ion-col>
  
        <ion-col size="5.35">
          <!-- <ion-grid> -->
            <ion-row>
              <div class="expenses-card--category">
                {{expense.tx_org_category === 'Unspecified' && expense?.tx_extracted_data?.category ? expense?.tx_extracted_data?.category : expense.tx_org_category}}
              </div>
              <mat-icon *ngIf="isCriticalPolicyViolated || isPolicyViolated" class="expenses-card--policy-violated-icon">error</mat-icon>
            </ion-row>
            <ion-row>
              <div class="expenses-card--vendor">
                {{expense.vendorDetails || expenseFields.vendor_id[0].field_name + ' not filled'}}
              </div>
            </ion-row>
            <ion-row>
              <div *ngIf="isProjectMandatory" class="expenses-card--project">
                {{(expense.tx_project_name ? 'Project: ' +  expense.tx_project_name : 'Project not filled') | ellipsis: 20}}
              </div>
            </ion-row>
          <!-- </ion-grid> -->
  
        </ion-col>
  
        <ion-col size="4">
          <div class="ion-text-right">
            <div>
              <span class="expenses-card--currency">{{currencySymbol}}</span>
              <span class="expenses-card--amount">{{(expense.tx_amount || 0) | humanizeCurrency: homeCurrency: 2: true }}</span>
              <span>
                <mat-icon svgIcon="{{icon}}"></mat-icon>
              </span>
            </div>

            <div *ngIf="expense.tx_orig_currency && expense.tx_orig_amount">
              <div class="expenses-card--exchange-rate">
                ({{expense.tx_orig_currency}} {{expense.tx_orig_amount | humanizeCurrency: expense.tx_orig_currency : 2: true }} at {{currencySymbol}} {{(expense.tx_amount / expense.tx_orig_amount) | number: '1.0-2'}})
              </div>
            </div>
            <div *ngIf="expense.tx_state.toLowerCase() === 'draft'">
              <span class="expenses-card--state">
                {{expense.tx_state | titlecase}}
              </span>
              
            </div>
            <div>
              <div class="expenses-card--critical-policy-violatios" *ngIf="isCriticalPolicyViolated">
                Critical policy violations
              </div>
            </div>

          </div>
            

  
        </ion-col>
      </ion-row>
    </ion-grid>

  </ng-container>
  




</div>
